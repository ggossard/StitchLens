@model IEnumerable<StitchLens.Data.Models.Project>
@{
    ViewData["Title"] = "My Patterns";
}

<!-- MyPatterns Hero Section -->
<section class="patterns-hero-section">
    <div class="container">
        <div class="patterns-hero-content">
            <div>
                <h1 class="patterns-hero-title">My Pattern Library</h1>
                <p class="patterns-hero-subtitle">All your beautiful creations in one place</p>
            </div>
            <div class="patterns-stats">
                <div class="pattern-stat">
                    <div class="stat-number">@Model.Count()</div>
                    <div class="stat-label">Total Patterns</div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container patterns-container">

    @if (!Model.Any()) {
        <!-- Empty State -->
        <div class="patterns-empty-state">
            <div class="empty-state-icon">
                <i class="fas fa-folder-open"></i>
            </div>
            <h3 class="empty-state-title">No Patterns Yet</h3>
            <p class="empty-state-text">
                You haven't created any patterns yet. Let's bring your first photo to life!
            </p>
            <a asp-controller="Pattern" asp-action="Upload" class="btn btn-primary btn-lg">
                <i class="fas fa-plus-circle me-2"></i>Create Your First Pattern
            </a>

            <div class="empty-state-tips">
                <h5>What you can create:</h5>
                <div class="tip-grid">
                    <div class="tip-item">
                        <i class="fas fa-heart"></i>
                        <span>Family Photos</span>
                    </div>
                    <div class="tip-item">
                        <i class="fas fa-paw"></i>
                        <span>Pet Portraits</span>
                    </div>
                    <div class="tip-item">
                        <i class="fas fa-mountain"></i>
                        <span>Landscapes</span>
                    </div>
                    <div class="tip-item">
                        <i class="fas fa-palette"></i>
                        <span>Artwork</span>
                    </div>
                </div>
            </div>
        </div>
    }
    else {
        <!-- Patterns Grid -->
        <div class="patterns-grid">
            @foreach (var project in Model) {
                <div class="pattern-card">
                    <div class="pattern-image-wrapper">
                        @if (!string.IsNullOrEmpty(project.ProcessedImagePath) && System.IO.File.Exists(project.ProcessedImagePath)) {
                            <img src="/uploads/@System.IO.Path.GetFileName(project.ProcessedImagePath)"
                                 class="pattern-image"
                                 alt="@project.Title">
                        }
                        else if (!string.IsNullOrEmpty(project.OriginalImagePath) && System.IO.File.Exists(project.OriginalImagePath)) {
                            <img src="/uploads/@System.IO.Path.GetFileName(project.OriginalImagePath)"
                                 class="pattern-image"
                                 alt="@project.Title">
                        }
                        else {
                            <div class="pattern-image-placeholder">
                                <i class="fas fa-image"></i>
                                <span>No Preview</span>
                            </div>
                        }
                        <div class="pattern-overlay">
                            <div class="pattern-actions">
                                <a asp-controller="Pattern" asp-action="Preview" asp-route-id="@project.Id"
                                   class="pattern-action-btn" title="View Pattern">
                                    <i class="fas fa-eye"></i>
                                </a>
                                @if (!string.IsNullOrEmpty(project.ProcessedImagePath)) {
                                    <a asp-controller="Pattern" asp-action="DownloadPdf" asp-route-id="@project.Id"
                                       class="pattern-action-btn" title="Download PDF">
                                        <i class="fas fa-download"></i>
                                    </a>
                                }
                            </div>
                        </div>
                    </div>

                    <div class="pattern-card-body">
                        <h5 class="pattern-title">@project.Title</h5>

                        <div class="pattern-specs">
                            <div class="pattern-spec">
                                <i class="fas fa-ruler-combined"></i>
                                <span>@project.WidthInches.ToString("F1")" × @project.HeightInches.ToString("F1")"</span>
                            </div>
                            <div class="pattern-spec">
                                <i class="fas fa-th"></i>
                                <span>@project.MeshCount mesh</span>
                            </div>
                            <div class="pattern-spec">
                                <i class="fas fa-palette"></i>
                                <span>@project.MaxColors colors</span>
                            </div>
                        </div>

                        @if (project.YarnBrand != null) {
                            <div class="pattern-yarn">
                                <i class="fas fa-scroll"></i>
                                <span>@project.YarnBrand.Name</span>
                            </div>
                        }

                        <div class="pattern-footer">
                            <div class="pattern-date">
                                <i class="fas fa-calendar-alt"></i>
                                <span>@project.CreatedAt.ToLocalTime().ToString("MMM d, yyyy")</span>
                            </div>
                            <div class="pattern-badge">
                                @project.StitchType
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        <!-- Create New Pattern Button -->
        <div class="patterns-create-more">
            <a asp-controller="Pattern" asp-action="Upload" class="btn btn-primary btn-lg">
                <i class="fas fa-plus-circle me-2"></i>Create Another Pattern
            </a>
        </div>
    }
</div>